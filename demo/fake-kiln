#!/bin/bash
# Fake kiln CLI for demo recording
# Produces realistic output without requiring a connected printer

CMD="$1"
shift

case "$CMD" in
  "discover")
    echo "Scanning local network for 3D printers..."
    echo ""
    sleep 1
    echo "  Found 3 printers:"
    echo ""
    echo "  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    echo "  â”‚  ğŸ–¨  ender3          OctoPrint    http://ender3.local       â”‚"
    echo "  â”‚  ğŸ–¨  voron-2.4       Moonraker    http://voron.local        â”‚"
    echo "  â”‚  ğŸ–¨  bambu-x1c       Bambu Lab    192.168.1.42              â”‚"
    echo "  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    echo ""
    echo "  Run 'kiln auth --name <printer> --host <url>' to configure."
    ;;
  "status")
    echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    echo "â”‚  Printer: ender3  (OctoPrint)                       â”‚"
    echo "â”‚  Status:  ğŸŸ¢ Printing                               â”‚"
    echo "â”‚                                                     â”‚"
    echo "â”‚  Job:     benchy.gcode                              â”‚"
    echo "â”‚  Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  62.4%              â”‚"
    echo "â”‚  Time:     1h 12m elapsed  Â·  43m remaining         â”‚"
    echo "â”‚                                                     â”‚"
    echo "â”‚  Hotend:   210Â°C / 210Â°C                            â”‚"
    echo "â”‚  Bed:      60Â°C / 60Â°C                              â”‚"
    echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    ;;
  "slice")
    echo "Slicing benchy.stl with PrusaSlicer..."
    echo "  Profile: Creality Ender 3 (0.2mm, PLA)"
    sleep 1
    echo "  âœ“ Layer height: 0.2mm"
    echo "  âœ“ Infill: 20% gyroid"
    echo "  âœ“ Supports: none"
    echo "  âœ“ Estimated time: 1h 55m"
    echo "  âœ“ Filament: 12.3m (36.8g)"
    echo ""
    echo "  Output: benchy_0.2mm_PLA_ender3.gcode"
    ;;
  "preflight")
    echo "Running pre-flight safety checks..."
    echo ""
    echo "  âœ“ Printer online and idle"
    echo "  âœ“ Hotend temp within safe range (max 260Â°C)"
    echo "  âœ“ Bed temp within safe range (max 110Â°C)"
    echo "  âœ“ G-code validated â€” no dangerous commands"
    echo "  âœ“ File exists on printer"
    echo "  âœ“ Filament detected"
    echo ""
    echo "  All checks passed. Safe to print."
    ;;
  "print")
    echo "Starting print: benchy_0.2mm_PLA_ender3.gcode"
    echo ""
    echo "  âœ“ Pre-flight checks passed"
    echo "  âœ“ Print started successfully"
    echo ""
    echo "  Estimated completion: 1h 55m"
    echo "  Monitor with: kiln status"
    ;;
  "fleet")
    echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    echo "â”‚  Fleet Status                                                   â”‚"
    echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
    echo "â”‚  Printer     â”‚  Type    â”‚  Status  â”‚  Job      â”‚  Progress     â”‚"
    echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
    echo "â”‚  ender3      â”‚  FDM     â”‚ Printing â”‚ benchy    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  62%  â”‚"
    echo "â”‚  voron-2.4   â”‚  FDM     â”‚ Idle     â”‚  â€”        â”‚  â€”            â”‚"
    echo "â”‚  bambu-x1c   â”‚  FDM     â”‚ Printing â”‚ bracket   â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ 84%  â”‚"
    echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    echo ""
    echo "  3 printers registered  Â·  2 active jobs  Â·  1 idle"
    ;;
  "--help")
    kiln --help
    ;;
  *)
    kiln "$CMD" "$@"
    ;;
esac
